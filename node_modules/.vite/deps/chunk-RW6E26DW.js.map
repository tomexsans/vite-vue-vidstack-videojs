{
  "version": 3,
  "sources": ["../../vidstack/dist/dev/providers/video/native-hls-text-tracks.js", "../../vidstack/dist/dev/providers/video/picture-in-picture.js", "../../vidstack/dist/dev/providers/video/presentation/video-presentation.js", "../../vidstack/dist/dev/providers/video/provider.js"],
  "sourcesContent": ["import { onDispose } from 'maverick.js';\nimport { H as TextTrack, Z as TEXT_TRACK_NATIVE, J as TEXT_TRACK_READY_STATE, _ as TEXT_TRACK_NATIVE_HLS } from '../../media-core.js';\n\nclass NativeHLSTextTracks {\n  constructor(_video, _context) {\n    this._video = _video;\n    this._context = _context;\n    _video.textTracks.onaddtrack = this._onAddTrack.bind(this);\n    onDispose(this._onDispose.bind(this));\n  }\n  _onAddTrack(event) {\n    const nativeTrack = event.track;\n    if (!nativeTrack || findTextTrackElement(this._video, nativeTrack))\n      return;\n    const track = new TextTrack({\n      id: nativeTrack.id,\n      kind: nativeTrack.kind,\n      label: nativeTrack.label,\n      language: nativeTrack.language,\n      type: \"vtt\"\n    });\n    track[TEXT_TRACK_NATIVE] = { track: nativeTrack };\n    track[TEXT_TRACK_READY_STATE] = 2;\n    track[TEXT_TRACK_NATIVE_HLS] = true;\n    let lastIndex = 0;\n    const onCueChange = (event2) => {\n      if (!nativeTrack.cues)\n        return;\n      for (let i = lastIndex; i < nativeTrack.cues.length; i++) {\n        track.addCue(nativeTrack.cues[i], event2);\n        lastIndex++;\n      }\n    };\n    onCueChange(event);\n    nativeTrack.oncuechange = onCueChange;\n    this._context.textTracks.add(track, event);\n    track.setMode(nativeTrack.mode, event);\n  }\n  _onDispose() {\n    this._video.textTracks.onaddtrack = null;\n    for (const track of this._context.textTracks) {\n      const nativeTrack = track[TEXT_TRACK_NATIVE]?.track;\n      if (nativeTrack?.oncuechange)\n        nativeTrack.oncuechange = null;\n    }\n  }\n}\nfunction findTextTrackElement(video, track) {\n  return Array.from(video.children).find((el) => el.track === track);\n}\n\nexport { NativeHLSTextTracks as N };\n", "import { listenEvent } from 'maverick.js/std';\nimport { $ as canUsePictureInPicture } from '../../media-core.js';\n\nclass VideoPictureInPicture {\n  constructor(_video, _media) {\n    this._video = _video;\n    this._media = _media;\n    listenEvent(this._video, \"enterpictureinpicture\", this._onEnter.bind(this));\n    listenEvent(this._video, \"leavepictureinpicture\", this._onExit.bind(this));\n  }\n  get active() {\n    return document.pictureInPictureElement === this._video;\n  }\n  get supported() {\n    return canUsePictureInPicture(this._video);\n  }\n  async enter() {\n    return this._video.requestPictureInPicture();\n  }\n  exit() {\n    return document.exitPictureInPicture();\n  }\n  _onEnter(event) {\n    this._onChange(true, event);\n  }\n  _onExit(event) {\n    this._onChange(false, event);\n  }\n  _onChange = (active, event) => {\n    this._media.delegate._dispatch(\"picture-in-picture-change\", {\n      detail: active,\n      trigger: event\n    });\n  };\n}\n\nexport { VideoPictureInPicture as V };\n", "import { listenEvent, DOMEvent } from 'maverick.js/std';\nimport { a0 as canUseVideoPresentation } from '../../../media-core.js';\n\nclass VideoPresentation {\n  constructor(_video, _media) {\n    this._video = _video;\n    this._media = _media;\n    listenEvent(this._video, \"webkitpresentationmodechanged\", this._onModeChange.bind(this));\n  }\n  _mode = \"inline\";\n  get _supported() {\n    return canUseVideoPresentation(this._video);\n  }\n  async _setPresentationMode(mode) {\n    if (this._mode === mode)\n      return;\n    this._video.webkitSetPresentationMode(mode);\n  }\n  _onModeChange() {\n    const prevMode = this._mode;\n    this._mode = this._video.webkitPresentationMode;\n    {\n      this._media.logger?.infoGroup(\"presentation mode change\").labelledLog(\"Mode\", this._mode).labelledLog(\"Event\", event).dispatch();\n    }\n    this._media.player?.dispatchEvent(\n      new DOMEvent(\"video-presentation-change\", {\n        detail: this._mode,\n        trigger: event\n      })\n    );\n    [\"fullscreen\", \"picture-in-picture\"].forEach((type) => {\n      if (this._mode === type || prevMode === type) {\n        this._media.delegate._dispatch(`${type}-change`, {\n          detail: this._mode === type,\n          trigger: event\n        });\n      }\n    });\n  }\n}\nclass FullscreenPresentationAdapter {\n  constructor(_presentation) {\n    this._presentation = _presentation;\n  }\n  get active() {\n    return this._presentation._mode === \"fullscreen\";\n  }\n  get supported() {\n    return this._presentation._supported;\n  }\n  async enter() {\n    this._presentation._setPresentationMode(\"fullscreen\");\n  }\n  async exit() {\n    this._presentation._setPresentationMode(\"inline\");\n  }\n}\nclass PIPPresentationAdapter {\n  constructor(_presentation) {\n    this._presentation = _presentation;\n  }\n  get active() {\n    return this._presentation._mode === \"picture-in-picture\";\n  }\n  get supported() {\n    return this._presentation._supported;\n  }\n  async enter() {\n    this._presentation._setPresentationMode(\"picture-in-picture\");\n  }\n  async exit() {\n    this._presentation._setPresentationMode(\"inline\");\n  }\n}\n\nexport { FullscreenPresentationAdapter as F, PIPPresentationAdapter as P, VideoPresentation as V };\n", "import { onDispose } from 'maverick.js';\nimport { a0 as canUseVideoPresentation, $ as canUsePictureInPicture, Y as canPlayHLSNatively, a1 as ATTACH_VIDEO } from '../../media-core.js';\nimport { H as HTMLMediaProvider } from '../html/provider.js';\nimport { N as NativeHLSTextTracks } from './native-hls-text-tracks.js';\nimport { V as VideoPictureInPicture } from './picture-in-picture.js';\nimport { V as VideoPresentation, F as FullscreenPresentationAdapter, P as PIPPresentationAdapter } from './presentation/video-presentation.js';\nimport 'maverick.js/element';\nimport 'maverick.js/std';\nimport '../type-check.js';\nimport '../audio/loader.js';\nimport 'maverick.js/dom';\nimport '../hls/loader.js';\nimport './loader.js';\nimport '../html/htmlâ€“media-events.js';\nimport '../hls/hls.js';\nimport '../../media-ui.js';\nimport '../../icons/icon.js';\nimport 'media-captions';\nimport '../html/native-audio-tracks.js';\n\nclass VideoProvider extends HTMLMediaProvider {\n  $$PROVIDER_TYPE = \"VIDEO\";\n  get type() {\n    return \"video\";\n  }\n  fullscreen;\n  pictureInPicture;\n  constructor(video, context) {\n    super(video);\n    if (canUseVideoPresentation(video)) {\n      const presentation = new VideoPresentation(video, context);\n      this.fullscreen = new FullscreenPresentationAdapter(presentation);\n      this.pictureInPicture = new PIPPresentationAdapter(presentation);\n    } else if (canUsePictureInPicture(video)) {\n      this.pictureInPicture = new VideoPictureInPicture(video, context);\n    }\n  }\n  setup(context) {\n    super.setup(context);\n    if (canPlayHLSNatively(this.video)) {\n      new NativeHLSTextTracks(this.video, context);\n    }\n    context.textRenderers[ATTACH_VIDEO](this.video);\n    onDispose(() => {\n      context.textRenderers[ATTACH_VIDEO](null);\n    });\n    if (this.type === \"video\")\n      context.delegate._dispatch(\"provider-setup\", { detail: this });\n  }\n  /**\n   * The native HTML `<video>` element.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLVideoElement}\n   */\n  get video() {\n    return this._media;\n  }\n}\n\nexport { VideoProvider };\n"],
  "mappings": "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",
  "names": ["event", "event2", "event"]
}
